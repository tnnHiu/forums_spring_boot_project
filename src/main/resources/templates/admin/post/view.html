<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org" th:replace="admin-layout :: layout(~{::main})">
<body>
<main th:fragment="main">
  <div class="container-fluid">
    <!-- Breadcrumbs and navigation -->
    <div class="d-flex justify-content-between align-items-center mb-3">
      <nav aria-label="breadcrumb">
        <ol class="breadcrumb mb-0">
          <li class="breadcrumb-item"><a th:href="@{/admin}">Trang chủ</a></li>
          <li class="breadcrumb-item"><a th:href="@{/admin/posts}">Quản lý bài đăng</a></li>
          <li class="breadcrumb-item active" aria-current="page">Chi tiết bài đăng</li>
        </ol>
      </nav>
      <div>
        <a th:href="@{/admin/posts}" class="btn btn-outline-secondary me-2">
          <i class="bi bi-arrow-left"></i> Quay lại
        </a>
        <a th:href="@{/admin/posts/{id}/edit(id=${post.id})}" class="btn btn-outline-primary me-2">
          <i class="bi bi-pencil"></i> Sửa
        </a>
        <button type="button" class="btn btn-outline-danger" data-bs-toggle="modal" th:data-bs-target="'#deletePostModal' + ${post.id}">
          <i class="bi bi-trash"></i> Xóa
        </button>
      </div>
    </div>

    <!-- Post details card -->
    <div class="card shadow-sm mb-4">
      <div class="card-header bg-primary text-white py-3">
        <h5 class="card-title mb-0" th:text="${post.title}">Tiêu đề bài đăng</h5>
      </div>
      <div class="card-body">
        <!-- Content section -->
        <div class="mb-4">
          <h6 class="fw-bold text-primary">Nội dung</h6>
          <div class="border rounded p-3" style="min-height: 200px;" th:text="${post.content}">
            Nội dung bài đăng
          </div>
        </div>

        <hr class="my-4">

        <!-- Post metadata -->
        <div class="row g-3">
          <!-- Left column -->
          <div class="col-md-6">
            <div class="mb-3">
              <h6 class="fw-bold text-primary">Danh mục</h6>
              <p class="mb-0 border rounded p-2" th:text="${post.categoryName}">Tên danh mục</p>
            </div>

            <div class="mb-3">
              <h6 class="fw-bold text-primary">Người đăng</h6>
              <p class="mb-0 border rounded p-2" th:text="${post.userName}">Tên người dùng</p>
            </div>

            <div class="mb-3">
              <h6 class="fw-bold text-primary">Loại nội dung</h6>
              <p class="mb-0 border rounded p-2">
                <span th:if="${post.isPremium == 1}" class="badge bg-warning">Premium</span>
                <span th:unless="${post.isPremium == 1}" class="badge bg-secondary">Free</span>
              </p>
            </div>
          </div>

          <!-- Right column -->
          <div class="col-md-6">
            <div class="mb-3">
              <h6 class="fw-bold text-primary">Trạng thái</h6>
              <p class="mb-0 border rounded p-2">
                <span th:if="${post.status == 0}" class="badge bg-success">ACTIVE</span>
                <span th:if="${post.status == 1}" class="badge bg-warning">INACTIVE</span>
                <span th:if="${post.status == 2}" class="badge bg-danger">BANNED</span>
                <span class="ms-2" th:text="${post.statusName}">Status name</span>
              </p>
            </div>

            <div class="mb-3">
              <h6 class="fw-bold text-primary">Ngày tạo</h6>
              <p class="mb-0 border rounded p-2" th:text="${#temporals.format(post.createdAt, 'dd/MM/yyyy HH:mm')}">
                01/01/2023
              </p>
            </div>

            <div class="mb-3">
              <h6 class="fw-bold text-primary">Ngày cập nhật</h6>
              <p class="mb-0 border rounded p-2" th:text="${post.updatedAt != null ? #temporals.format(post.updatedAt, 'dd/MM/yyyy HH:mm') : '-'}">
                -
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Delete confirmation modal -->
  <div class="modal fade" th:id="'deletePostModal' + ${post.id}" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Xác nhận xóa</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <p>Bạn có chắc chắn muốn xóa bài đăng "<span th:text="${post.title}"></span>"?</p>
          <p class="text-danger mb-0"><strong>Lưu ý:</strong> Hành động này không thể hoàn tác!</p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Hủy</button>
          <form th:action="@{/admin/posts/{id}/delete(id=${post.id})}" method="post">
            <button type="submit" class="btn btn-danger">Xóa</button>
          </form>
        </div>
      </div>
    </div>
  </div>
</main>
</body>
</html>